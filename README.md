# 🗓️ Wally-Timetable (Tauri Edition)

**Wally-Timetable** 是一款基于 **Tauri (Rust)** + **Vue 3** 开发的高性能、高颜值桌面课程表工具。它是原有 `eframe` 版本的全面升级版，不仅继承了精致的半透明卡片风格，还引入了**交互式编辑**功能。

---

## ✨ 核心特性

- **🎮 全键盘交互**：
  - **方向键导航**：使用 `↑` `↓` `←` `→` 在课程格子间自由移动焦点。
  - **即时编辑**：选中格子按 `Enter` 键或双击即可直接修改课程内容。
  - **自动持久化**：所有的修改都会实时同步回 `data/schedule.csv` 文件。
- **📏 智能自适应布局**：
  - **字体缩放**：根据窗口大小和课程密度，自动计算并实时调节全表字体大小。
  - **动态边距**：根据屏幕尺寸自动优化左侧时间列宽度与全局边距。
- **🎨 莫兰迪柔和配色**：
  - 采用更柔和、护眼的配色方案（基于 Rose Pine 设计语言）。
  - **色彩哈希算法**：通过课程名称自动生成唯一对应的柔和背景色，确保界面丰富而不刺眼。
- **🚀 极致性能**：
  - 后端由 Rust 驱动，前端使用轻量化 Vue 3，内存占用极低。
  - 原生系统渲染，支持窗口透明度与自定义字体。

---

## 🛠️ 项目结构

```text
wally_timetable/
├── src-tauri/            # Rust 后端 (逻辑与文件系统交互)
│   ├── src/main.rs       # 核心指令路由
│   ├── src/data.rs       # CSV 强类型解析与存储
│   └── src/config.rs     # 主题配置文件解析
├── src/                  # Vue 前端 (UI 与 交互)
│   ├── App.vue           # 核心渲染逻辑与键盘监听
│   └── main.js           
├── assets/               # 静态资源
│   ├── fonts/            # 字体文件 (Maple Mono)
│   └── styles/theme.conf # 皮肤配色与基础字体配置
├── data/
│   └── schedule.csv      # 课表数据库
└── package.json          # Node.js 环境配置
```

---

## 🚀 快速开始

### 1. 环境准备

确保你的开发环境已安装：
- **Rust & Cargo**
- **Node.js (LTS)**
- **系统开发库**（仅 Linux 需要）：`libwebkit2gtk-4.0-dev`, `build-essential`, `libgtk-3-dev` 等。

### 2. 安装依赖

```bash
npm install
```

### 3. 开发环境运行

```bash
npm run tauri dev
```

### 4. 生产环境构建

```bash
npm run tauri build
```

---

## ⌨️ 操作指南

| 动作 | 操作 |
| :--- | :--- |
| **移动焦点** | `↑` `↓` `←` `→` 方向键 |
| **进入编辑** | `Enter` 键 或 `双击` 目标单元格 |
| **保存修改** | 编辑状态下按 `Enter` 或 点击别处 (自动同步 CSV) |
| **取消编辑** | 编辑状态下按 `Esc` |
| **调整大小** | 直接拖拽窗口边框，字体将自动缩放 |

---

## 🎨 自定义配置

### 课表数据 (`data/schedule.csv`)
格式遵循：第一行为星期，第一列为时间段。
```csv
,Mon.,Tue.,Wed.,...
08:00-09:50,高等数学,大学英语,,...
...
```

### 主题配置 (`assets/styles/theme.conf`)
你可以修改此文件来调整配色方案和默认字体大小：
- `background`: 窗口背景色。
- `foreground`: 默认文字颜色。
- `font_size`: 基础字体参考大小。
- `color0` ~ `color15`: 课程卡片的备选颜色池。

---

## 💡 布局设计细节

- **左边距优化**：为了保证长格式时间（如 `19:00-20:50`）不被遮挡，左侧时间列已加宽并增加左侧内边距。
- **内容保护**：长课程名将自动启用 `-webkit-line-clamp` 进行溢出隐藏，并根据长度微调自身字号，确保卡片视觉整齐。

---

## 📜 开源协议

本项目采用 **MIT** 协议。您可以自由地进行二次开发与个人分发。

Copyright (c) 2026 waliwuao.
